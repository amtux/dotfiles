export TERM=xterm-256color

# powerline stuff
POWERLEVEL9K_DISABLE_RPROMPT=true
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(dir vcs)
POWERLEVEL9K_PROMPT_ADD_NEWLINE=false
# set history
export HISTFILE=~/.zhistory
export HISTSIZE=10000
export SAVEHIST=10000
setopt append_history
setopt extended_history
setopt inc_append_history
setopt interactivecomments

# Auto CD
setopt auto_cd

autoload -Uz compinit
typeset -i updated_at=$(date +'%j' -r ~/.zcompdump 2>/dev/null || stat -f '%Sm' -t '%j' ~/.zcompdump 2>/dev/null)
if [ $(date +'%j') != $updated_at ]; then
  compinit -i
else
  compinit -C -i
fi

# ~/.zshrc
source ~/.zsh-plugins.sh

#load generic funcs/exports if they exist - wont be checked in
[[ -f $HOME/s/work-scripts.sh ]] && source $HOME/s/work-scripts.sh
[[ -f $HOME/s/extras.sh ]] && source $HOME/s/extras.sh

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
export FZF_DEFAULT_COMMAND='rg --files --no-ignore --hidden --follow -g "!{.git,node_modules}/*" 2> /dev/null'

# git aliases etc
source "$(eval echo ~$USER)/dotfiles/zsh/git.zsh"
source <(kubectl completion zsh)

# handle nvm
export NVM_DIR="$HOME/.nvm"
[ -s "/usr/local/opt/nvm/nvm.sh" ] && . "/usr/local/opt/nvm/nvm.sh"  # This loads nvm

# added by travis gem
[ -f $HOME/.travis/travis.sh ] && source $HOME/.travis/travis.sh

clear_scrollback() {
  printf '\033[2J\033[3J\033[1;1H'
}

# aliases
alias vim=nvim
alias ls="exa -l --git"
alias l="exa -la --git"
